// CodeMirror, copyright (c) by Marijn Haverbeke and others
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function n(e,n){for(var t=0;t<e.length;t++)n(e[t],t)}function t(e,n){for(var t=0;t<e.length;t++)if(n(e[t],t))return!0;return!1}e.defineMode("dylan",function(){function e(e,n,t){return n.tokenize=t,t(e,n)}function i(n,i){var a=n.peek();if("'"==a||'"'==a)return n.next(),e(n,i,o(a,"string"));if("/"==a){if(n.next(),n.eat("*"))return e(n,i,r);if(n.eat("/"))return n.skipToEnd(),"comment";n.backUp(1)}else if(/[+\-\d\.]/.test(a)){if(n.match(/^[+-]?[0-9]*\.[0-9]*([esdx][+-]?[0-9]+)?/i)||n.match(/^[+-]?[0-9]+([esdx][+-]?[0-9]+)/i)||n.match(/^[+-]?\d+/))return"number"}else{if("#"==a)return n.next(),'"'==(a=n.peek())?(n.next(),e(n,i,o('"',"string"))):"b"==a?(n.next(),n.eatWhile(/[01]/),"number"):"x"==a?(n.next(),n.eatWhile(/[\da-f]/i),"number"):"o"==a?(n.next(),n.eatWhile(/[0-7]/),"number"):"#"==a?(n.next(),"punctuation"):"["==a||"("==a?(n.next(),"bracket"):n.match(/f|t|all-keys|include|key|next|rest/i)?"atom":(n.eatWhile(/[-a-zA-Z]/),"error");if("~"==a)return n.next(),"="==(a=n.peek())?(n.next(),"="==(a=n.peek())?(n.next(),"operator"):"operator"):"operator";if(":"==a){if(n.next(),"="==(a=n.peek()))return n.next(),"operator";if(":"==a)return n.next(),"punctuation"}else{if(-1!="[](){}".indexOf(a))return n.next(),"bracket";if(-1!=".,".indexOf(a))return n.next(),"punctuation";if(n.match("end"))return"keyword"}}for(var f in c)if(c.hasOwnProperty(f)){var s=c[f];if(s instanceof Array&&t(s,function(e){return n.match(e)})||n.match(s))return u[f]}return/[+\-*\/^=<>&|]/.test(a)?(n.next(),"operator"):n.match("define")?"def":(n.eatWhile(/[\w\-]/),d.hasOwnProperty(n.current())?p[n.current()]:n.current().match(l)?"variable":(n.next(),"variable-2"))}function r(e,n){for(var t,r=!1,o=!1,a=0;t=e.next();){if("/"==t&&r){if(!(a>0)){n.tokenize=i;break}a--}else"*"==t&&o&&a++;r="*"==t,o="/"==t}return"comment"}function o(e,n){return function(t,r){for(var o,a=!1,f=!1;null!=(o=t.next());){if(o==e&&!a){f=!0;break}a=!a&&"\\"==o}return!f&&a||(r.tokenize=i),n}}var a={unnamedDefinition:["interface"],namedDefinition:["module","library","macro","C-struct","C-union","C-function","C-callable-wrapper"],typeParameterizedDefinition:["class","C-subtype","C-mapped-subtype"],otherParameterizedDefinition:["method","function","C-variable","C-address"],constantSimpleDefinition:["constant"],variableSimpleDefinition:["variable"],otherSimpleDefinition:["generic","domain","C-pointer-type","table"],statement:["if","block","begin","method","case","for","select","when","unless","until","while","iterate","profiling","dynamic-bind"],separator:["finally","exception","cleanup","else","elseif","afterwards"],other:["above","below","by","from","handler","in","instance","let","local","otherwise","slot","subclass","then","to","keyed-by","virtual"],signalingCalls:["signal","error","cerror","break","check-type","abort"]};a.otherDefinition=a.unnamedDefinition.concat(a.namedDefinition).concat(a.otherParameterizedDefinition),a.definition=a.typeParameterizedDefinition.concat(a.otherDefinition),a.parameterizedDefinition=a.typeParameterizedDefinition.concat(a.otherParameterizedDefinition),a.simpleDefinition=a.constantSimpleDefinition.concat(a.variableSimpleDefinition).concat(a.otherSimpleDefinition),a.keyword=a.statement.concat(a.separator).concat(a.other);var f="[-_a-zA-Z?!*@<>$%]+",l=new RegExp("^"+f),c={symbolKeyword:f+":",symbolClass:"<"+f+">",symbolGlobal:"\\*"+f+"\\*",symbolConstant:"\\$"+f},u={symbolKeyword:"atom",symbolClass:"tag",symbolGlobal:"variable-2",symbolConstant:"variable-3"};for(var s in c)c.hasOwnProperty(s)&&(c[s]=new RegExp("^"+c[s]));c.keyword=[/^with(?:out)?-[-_a-zA-Z?!*@<>$%]+/];var m={};m.keyword="keyword",m.definition="def",m.simpleDefinition="def",m.signalingCalls="builtin";var d={},p={};return n(["keyword","definition","simpleDefinition","signalingCalls"],function(e){n(a[e],function(n){d[n]=e,p[n]=m[e]})}),{startState:function(){return{tokenize:i,currentIndent:0}},token:function(e,n){if(e.eatSpace())return null;return n.tokenize(e,n)},blockCommentStart:"/*",blockCommentEnd:"*/"}}),e.defineMIME("text/x-dylan","dylan")});