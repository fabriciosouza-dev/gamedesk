// CodeMirror, copyright (c) by Marijn Haverbeke and others
!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror"),require("../yaml/yaml")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../yaml/yaml"],t):t(CodeMirror)}(function(t){var e=0,n=1,a=2;t.defineMode("yaml-frontmatter",function(r,o){function i(t){return t.state==n?{mode:m,state:t.yaml}:{mode:l,state:t.inner}}var m=t.getMode(r,"yaml"),l=t.getMode(r,o&&o.base||"gfm");return{startState:function(){return{state:e,yaml:null,inner:t.startState(l)}},copyState:function(e){return{state:e.state,yaml:e.yaml&&t.copyState(m,e.yaml),inner:t.copyState(l,e.inner)}},token:function(r,o){if(o.state==e)return r.match("---",!1)?(o.state=n,o.yaml=t.startState(m),m.token(r,o.yaml)):(o.state=a,l.token(r,o.inner));if(o.state==n){var i=r.sol()&&r.match(/(---|\.\.\.)/,!1),u=m.token(r,o.yaml);return i&&(o.state=a,o.yaml=null),u}return l.token(r,o.inner)},innerMode:i,indent:function(e,n,a){var r=i(e);return r.mode.indent?r.mode.indent(r.state,n,a):t.Pass},blankLine:function(t){var e=i(t);if(e.mode.blankLine)return e.mode.blankLine(e.state)}}})});